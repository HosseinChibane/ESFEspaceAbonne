{% extends ":backend:sidebar.html.twig" %}

{% block title %}
    Mes Documents - {{ parent() }}
{% endblock %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li><a href="{{ path('esf_espace_abonne_monProfil') }}">Home</a></li>
        <li class="active">Mes Documents</li>
    </ol>
{% endblock %}

{% block Content %} 

 {% for flash_message in app.session.flashBag.get('notice') %}
    <div class="alert alert-success" role="alert" id="success-alert">
       <button type="button" class="close" data-dismiss="alert">x</button>
       <strong> {{ flash_message }} </strong> 
   </div>
{% endfor %}

<!-- Mes Documents -->
{{ form_start(form, {'action': path('esf_espace_abonne_mesDocuments'), 'method': 'POST'}) }}

{% if not form.physique.vars.valid %}
    <div class="alert alert-error">
        {{ form_errors(form) }}
    </div>
{% endif %}

<div class="row">
    <div class="col-md-12">
        <div class="alert alert-info">
            <button type="button" class="close" data-dismiss="alert">x</button>
            <strong>Information !</strong> Si vous avez plusieurs "bulletins de notes" et/ou "lettres de recommandation", merci de les réunir en un seul fichier PDF.
        </div>         
    </div>
    <table id="demandeInsciption" class="table table-striped table-bordered nowrap" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>N°</th>
                <th>Nature</th>
                <th>Nom</th>
                <th>Envoyer</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% if form.physique.documents is defined %}
                <tr>
                    <td>1</td>
                    <td>{{ form_label(form.physique.documents.PasseportName, 'Passeport') }}</td>
                    <td>{{ form_widget(form.physique.documents.PasseportName) }}</td>
                    <td>{{ form_widget(form.physique.documents.PasseportFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadPasseport, { 'label': 'Envoyer' }) }}

                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'PasseportFile') }}" alt="{{ documentUser.PasseportName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>{{ form_label(form.physique.documents.CarteIdentiteName, 'Carte Identite') }}</td>
                    <td>{{ form_widget(form.physique.documents.CarteIdentiteName) }}</td>
                    <td>{{ form_widget(form.physique.documents.CarteIdentiteFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadCarteId, { 'label': 'Envoyer' }) }}
                        
                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'CarteIdentiteFile') }}" alt="{{ documentUser.CarteIdentiteName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>{{ form_label(form.physique.documents.BacName, 'Baccalaureat') }}</td>
                    <td>{{ form_widget(form.physique.documents.BacName) }}</td>
                    <td>{{ form_widget(form.physique.documents.BacFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadBac, { 'label': 'Envoyer' }) }}

                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'BacFile') }}" alt="{{ documentUser.BacName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>{{ form_label(form.physique.documents.CredentialName, 'Crédential / Autres équivalences') }}</td>
                    <td>{{ form_widget(form.physique.documents.CredentialName) }}</td>
                    <td>{{ form_widget(form.physique.documents.CredentialFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadCredential, { 'label': 'Envoyer' }) }}

                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'CredentialFile') }}" alt="{{ documentUser.CredentialName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>{{ form_label(form.physique.documents.BulletinNoteName, 'Bulletin de Note') }}</td>
                    <td>{{ form_widget(form.physique.documents.BulletinNoteName) }}</td>                
                    <td>{{ form_widget(form.physique.documents.BulletinNoteFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadBulletinNote, { 'label': 'Envoyer' }) }}

                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'BulletinNoteFile') }}" alt="{{ documentUser.BulletinNoteName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>6</td>                    
                    <td>{{ form_label(form.physique.documents.LettreRecommendationName, 'Lettres de Recommendation') }}</td>
                    <td>{{ form_widget(form.physique.documents.LettreRecommendationName) }}</td>
                    <td>{{ form_widget(form.physique.documents.LettreRecommendationFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadLettreRecommendation, { 'label': 'Envoyer' }) }}

                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'LettreRecommendationFile') }}" alt="{{ documentUser.LettreRecommendationName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>{{ form_label(form.physique.documents.LettreMotivationName, 'Lettre de Motivation') }}</td>
                    <td>{{ form_widget(form.physique.documents.LettreMotivationName) }}</td>
                    <td>{{ form_widget(form.physique.documents.LettreMotivationFile) }}</td>
                    <td>
                        {{ form_widget(form.physique.documents.uploadLettreMotivation, { 'label': 'Envoyer' }) }}
                        
                        <a class="btn btn-primary view-pdf" href="{{ vich_uploader_asset(documentUser, 'LettreMotivationFile') }}" alt="{{ documentUser.LettreMotivationName }}"  target="_blank">Télécharger</a>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    {# Token CSRF #}
    {{ form_widget(form._token) }}
    {# Data #}
    <div style="display:none">
        {{form_rest(form)}}
    </div>
    {{ form_end(form) }}

</div>
</div>
{% endblock %}

{# Bootstrap FileInput
    <input id="input-id" type="file" class="file" data-preview-file-type="text" >
, { 'attr': {'id': 'input-id', 'class': 'file', 'multiple': 'true', 'data-show-upload': 'false', 'data-show-caption': 'true', 'showUpload':false, 'previewFileType':'any'} }#}